<!doctype html>
<html>
<head>
<style>
body{
	background: black;
	text-align:center;
}
</style>
<script src='spork.js'></script>
<script>
var R, G, B;


function vectorColor(x){
  x=abs(sin(pi*x));
  //x=abs(x);
  var r=floor(x*R+(1-x)*(255-R));
  var g=floor(x*G+(1-x)*(255-G));
  var b=floor(x*B+(1-x)*(255-B));
  fillcolor(r,g,b);
}
function scaleNoise(x){
  if (x>0.5) return(1);
  else if (x<-0.5) return(-1);
  else return (2*x);
}
function sympix(x,y){
  fillrect(x,y,1,1);
  fillrect(y,x,1,1);
  fillrect(-x,y,1,1);
  fillrect(-y,x,1,1);
  fillrect(x,-y,1,1);
  fillrect(y,-x,1,1);
  fillrect(-x,-y,1,1);
  fillrect(-y,-x,1,1);
}
function flattenOutsideNoiseEdges(){
	var n=noiseGridSize;
	var x,y,z;
	for (x=0;x<=n;x++)
		for (y=0;y<=n;y++)
			for (z=0;z<=n;z++)
				if ((x==n) || (y==n))
					noiseValues[x][y][z]=0;	
}
function setup(){
  R=floor(random()*256);
  G=floor(random()*256);
  B=floor(random()*256);

  R=255;G=255;B=255;  
  //size(300,300);
  setupNoise(floor(random()*5)+2);
  flattenOutsideNoiseEdges();
  background('black');
  save();
  translate(width/2,height/2);
  rotate(floor(random()*4)*90);
}
function draw(){
  var x,y;
  for (x=0;x<=width/2;x++)
    for (y=0;y<=x;y++){
      vectorColor(scaleNoise(noise(2*x/width,2*y/height)));
      sympix(x,y);
    }
  var N=noiseGridSize;
  for (x=1;x<N;x++)
    for (y=1;y<N;y++)
      noiseValues[x][y][0]=2*random()-1;
    for (x=0;x<=width/2;x++)
    for (y=0;y<=x;y++){
      vectorColor(scaleNoise(noise(2*x/width,2*y/height)));
      fillrect(x,y,1,1);
      fillrect(y,x,1,1);
    }
    restore();
    color('black');
    linewidth(2);
line(0,0,width,0,width,height,0,height,0,0);
}

</script>
</head>
<body>
<div id='spork'></div>
</body>
</html>