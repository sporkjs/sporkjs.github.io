<!doctype html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
  <link rel="stylesheet" type="text/css" href="doran.css">

    <style>

    </style>
	<script src='header.js'></script>
      <script type="text/javascript" src="spork.js"></script>

    <script>

var x,y;
var x,y,mx,my;
var ax,ay,adx,ady;
var score;
//initialize x and y

function setup(){

r=0;
x=800;
y=800;
mx=0.2;
my=0.2;
ax=200
ay=100
adx=0.1;
ady=0.1;
score=0;
loop();
timestep(1);
}
function missile(){
  //preserve the state of the canvas
  save();
  fillcolor('yellow');
  circle(x,y,5);
  fill();
  x=(x+mx) ;
  y=(y+my) ;
  //restore state of canvas
  restore();
  }


function ship(){
  
  save();
  translate(200,200);
  rotate(r);
  fillcolor(70,70,70);
  color(70,70,70);
  circle(0,0,20);
  fill();
  fillcolor(70,70,70);
  color(70,70,70);
  triangle(15,-15,15,-5,30,-10);
  fill();
  fillcolor(70,70,70);
  color(70,70,70);
  triangle(15,15,15,5,30,10);
  fill();
  restore();
  }
function astroid(){
   //preserve the state of the canvas
   save();
   ax=(ax+adx+width) % width;
   ay=(ay+ady+height) % height;
   //move to location of Astroid
   translate(ax,ay);
   

   //drew Astroid
   fillcolor('red');
   circle(0,0,10); 
   fill();
   //restore state of canvas
   restore();
   }
function collision(){
  if(sqrt((200-ax)*(200-ax)+(200-ay)*(200-ay))<30){
     stoploop();
     font('courier');
     fillcolor('Green');
     filltext('Game Over',100,200);
     
     
}
     
     
}
function hit(){
  if(sqrt((x-ax)*(x-ax)+(y-ay)*(y-ay))<30){
     score=score+1;
     mx=800;
     my=800;
     mdx=0;
     mdy=0;
     ax=random()*width;
     ay=random()*height;
}
 
}
function onkeydown(){
  if (keyCode == rightArrow){
    r=r+6;
  }
  if (keyCode == leftArrow){
    r=r-6;
  }
    if (keyChar == 'S'){
    x=200;
    y=200;
    mx=cos(r*pi/180);
    my=sin(r*pi/180);
  }
  
}
function draw(){
  clear();
  background('black');
  missile(mx,my);  
  ship(x,y);
  astroid(ax,ay);
  collision();
  hit();
  fillcolor('green');
  filltext(score,10,390);
  }

</script>
</head>

<body>
<script>showHeader();</script>
<div class='TitleArea'>
	
	<h1>Astroid Shooter</h1>
	
</div>

<h3>Instructions</h3>
   	<p> Right Arrow = Rotate Right<br>
            Left Arrow = Rotate Left<br>
            S = Shoot
        </p>
<div id='spork'></div>
<script>showFooter();</script>
</body>
</html>



