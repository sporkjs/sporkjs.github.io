<!doctype html>
<html>
<head>
  <style>
  canvas{
    max-width: 50%;
    max-height: 50%;
  }
  img{
    max-width: 50%;
    max-height: 50%;
  }
  </style>
  <script src='spork.js'></script>
  <script>
  //paste mark functions below here
var small=20;

  function myRect(x,y,w,h){
    x=floor(x);
    y=floor(y);
      fillcolor(R[x][y],G[x][y],B[x][y],A[x][y]);
      rect(x,y,w,h);
      fill();
  }

  function mgrid(x,y,w,h){
    var l,k;
    if ((w<small) ||
        (h<small))
      //(random()<0.007))
        {
      myRect(x,y,w,h);
    }
    else if (w>h){ 		//wide
      l=random()*w;
      mgrid(x,y,l,h);		//left
      mgrid(x+l,y,w-l,h);	//right
    }
    else{ 				//tall
      k=random()*h;
      mgrid(x,y,w,k);		//top
      mgrid(x,y+k,w,h-k)	//bottom
    }
  }
  //paste mark functions above here
  var R=[];
  var G=[];
  var B=[];
  var A=[];
  function setup(){
    size(theImage.width,theImage.height);
    drawImage(theImage,width/2,height/2,width,height);
    copyImageData(R,G,B,A);
    clear();
  }
  function draw(){
      mgrid(0,0,width,height);
  }
  </script>
</head>
<body>
  <div id='spork'></div>
  <button onclick="startover();">Start Over</button>
  <button onclick="canvasToNewImg();">Make Image</button>
  <a href="index.html">Mondrian Grids Home</a>
  <br />
  <img src="donut.jpg" id="theImage"/>
</body>
</html>
