<!doctype html>
<html>
<head>
  <script src='spork.js'></script>
  <script>


  var R=[];
  var G=[];
  var B=[];
  var A=[];
  function setup(){
    size(theImage.width,theImage.height);
    drawImage(theImage,width/2,height/2,width,height);
    copyImageData(R,G,B,A);
    clear();
    color(0,0,0,0);
    loop();
    timestep(1);
  }
  function draw(){
    save();
    var x,y,r;
    var cx,cy;
    a=random()*width;
    b=random()*height;
    x=a+floor(random()*100);
  y=b+floor(random()*100);
  x2=a-floor(random()*100);
  y2=b+floor(random()*100);
  x3=a-floor(random()*100);
  y3=b-floor(random()*100);
  x4=a+floor(random()*100);
  y4=b-floor(random()*100);
    //color(R[x][y],G[x][y],B[x][y],A[x][y]);
    quad(x,y,x2,y2,x3,y3,x4,y4,r);
    clip();
    cx=random()*width;
    cy=random()*height;
    r=random()*360;
    drawImage(theImage,cx,cy,width,height,r);
    restore();
  }
  </script>
</head>
<body>
  <div id='spork'></div>
  <button onclick="stoploop();">Stop</button>
  <button onclick="startloop();">Start</button>
  <button onclick="startover();">Start Over</button>
  <button onclick="canvasToNewImg();">Make Image</button>
  <br />
  <img src="mountain.jpg" id="theImage"/>
</body>
</html>
